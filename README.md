# Разработка систем анализа больших данных. Домашнее задание №1 (HW)

## Обзор
Этот проект демонстрирует использование фреймворка Luigi для создания конвейера обработки данных. Конвейер загружает, проверяет, извлекает и обрабатывает набор данных из GEO (Gene Expression Omnibus). Он включает этапы организации данных, выполнения пользовательских скриптов и обеспечения воспроизводимости.

## Особенности
- **Модульный конвейер**: Построен на задачах Luigi для обеспечения чётких зависимостей и модульности.
- **Гибкая настройка**: Параметры для URL набора данных, выходных директорий и путей к скриптам.
- **Надёжная обработка ошибок**: Проверка входных данных и обработка ошибок при извлечении.
- **Логирование**: Используется модуль `logging` для подробных логов выполнения задач.
- **Интеграция внешних скриптов**: Обработка извлечённых файлов с использованием пользовательских скриптов.

## Требования
- Python 3.8+
- Необходимые библиотеки Python:
  - `luigi`
  - `requests`
  - `tqdm`
  - `pandas`

Установите зависимости с помощью:
```bash
pip install luigi requests tqdm pandas
```

## Файлы
- `pipeline.py`: Основная реализация конвейера.
- `toTabs.py`: Внешний скрипт для обработки извлечённых файлов.
- `README.md`: Документация проекта.

## Использование
### Запуск конвейера
1. Убедитесь, что все зависимости установлены.
2. Запустите конвейер с помощью следующей команды:
   ```bash
   python pipeline.py RunExternalScript --url "<DATASET_URL>" --output-dir <OUTPUT_DIRECTORY> --local-scheduler
   ```
   Замените `<DATASET_URL>` на URL набора данных (например, `https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE68849&format=file`) и `<OUTPUT_DIRECTORY>` на желаемую выходную директорию.

### Результат
- Конвейер создаёт структурированную выходную директорию с обработанными файлами.
- Результаты включают:
  - TSV-файлы, извлечённые из набора данных.
  - Отфильтрованные и организованные данные, готовые к анализу.

## Настройка
- **Удаление архивов**: Измените параметр `delete_archives` в `OrganizeAndProcessFiles`, чтобы сохранять или удалять архивы после обработки.
- **Путь к скрипту**: Установите параметр `script_path` в `RunExternalScript`, чтобы использовать пользовательский внешний скрипт.

## Логирование
Логи выполнения выводятся в консоль. Чтобы перенаправить логи в файл, измените настройку `logging.basicConfig` в `pipeline.py`.

## Примеры
### Пример команды
```bash
python pipeline.py RunExternalScript --url "https://www.ncbi.nlm.nih.gov/geo/download/?acc=GSE68849&format=file" --output-dir data --local-scheduler
```